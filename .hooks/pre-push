#!/bin/sh

# This script was generated by Nix.
# To make changes edit nix configuration.

echo "->> Running 'pre-push'"
# Dependencies for pre-push
echo "--->> Running 'gen-readme'"
# Dependencies for gen-readme

# Run gen-readme task
txtx ./README.mdx > README.md

echo "--->> Running 'gen-scripts'"
# Dependencies for gen-scripts

# Run gen-scripts task
nix run .#gen-scripts

echo "--->> Running 'update'"
# Dependencies for update
echo "----->> Running 'update-flake'"
# Dependencies for update-flake

# Run update-flake task
nix flake update

echo "----->> Running 'update-examples'"
# Dependencies for update-examples

# Run update-examples task
ls examples | while read example; do
    echo "Updating example: $example";
    nix flake update --flake ./examples/$example
done


# Run update task


echo "--->> Running 'check-no-uncommited'"
# Dependencies for check-no-uncommited

# Run check-no-uncommited task
git update-index --refresh > /dev/null
    git diff-index --quiet HEAD -- || {
        echo "Please commit all changes before pushing"
            exit 1
    }


# Run pre-push task

